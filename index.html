<html>
	<head>
		<script type='text/javascript' id='lt_ws' src='http://localhost:57399/socket.io/lighttable/ws.js'></script>
        <script type="text/javascript" src="js/cljs/main.js"></script>
	</head>
    <body>
        <script>

C = window.C;

// components are defined with a string, which must be unique
C.def(
"demo",
{name:"demo-component",
 x:0,
 y:0,
 randint:function(n){return parseInt(Math.random()*n);},
 init:function(c){c.x = c.randint(100);
                  c.y = c.randint(100);
                  console.log("init:" + c.name + ", " + c.x, c.y);}});

// entities will construct components from data, but here's a manual component
// constructing takes an object which is merged onto the default
test = C.types.demo({name:"joe"});

console.log(test);
//ec.sys.c.ec.sys.comp_1633 {cljs$lang$protocol_mask$partition0$: 8390912, cljs$lang$protocol_mask$partition1$: 0, name: "joe", x: 0, y: 0â€¦}

//if you were to do a hasOwnProperty loop you would find [x, y, name, randint]

// components and entities use a protocol of core functions, c.init is protocol and hoisted, c.randint is normal
C.call("init", test);

        </script>
    </body>
</html>

