<html>
<head>
	<script type="text/javascript" src='js/lib/pixi.min.js'></script>
    <script type="text/javascript" src="js/required.js"></script>
    <script type="text/javascript" src="js/cljs/main.js"></script>
    <script type="text/javascript" src="js/components/standard.js"></script>
    <script type="text/javascript" src="js/components/pixi-renderer.js"></script>

    <link href="css/ce.css" type="text/css" rel="stylesheet">

</head>
	<body>
        <script type="text/javascript" src="js/Constants.js"></script>

<script>



    C("actor",
      {name: ""},
      {init: function(c){
          c.name = c.parent.name || "none";
          c.parent.transform.position.x = Math.random() * 600;
          c.parent.transform.position.y = Math.random() * 400; },
       update: function(c){}})


    C("wander", {speed:2},
      {update: function(c){
          c.parent.transform.position.x += Math.random() * c.speed - 0.5 * c.speed;
          c.parent.transform.position.y += Math.random() * c.speed - 0.5 * c.speed; }});


    makeActor = function(name){
        res = E(name,
                C.new.transform(),
                C.new.actor(),
                C.new.sprite(),
                C.new.wander() );


        res.sprite.image = "assets/sprites/objects/alphasquare.png";
        return res;}

    root =
        E("game",
          C.new.pixi(),
          C.new.loop(),
          E( "people"));

    holder = root.find("people");
    for (i = 0;i<6000;i++){
        holder.add(makeActor("anon"));
    }

    window.onload = function(e){
        console.log("ready");
        E.init(root);
        //window.inspect(root);
    };


</script>
	</body>
</html>

