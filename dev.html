<html>
<head>
    <script type="text/javascript" src='js/lib/pixi.min.js'></script>
    <script type="text/javascript" src="js/required.js"></script>
    <script type="text/javascript" src="js/cljs/main.js"></script>
    <script type="text/javascript" src="js/components/standard.js"></script>
    <script type="text/javascript" src="js/components/pixi-renderer.js"></script>
    <script type="text/javascript" src="js/components/joegrid.js"></script>

    <link href="css/ce.css" type="text/css" rel="stylesheet">

</head>
<body>
<script>

E.mandate(C.new.transform);


C("actor",
  {name: ""},
  {init: function(c){
      c.name = c.owner.name || "none";
      c.owner.transform.position.x = Math.random() * 600;
      c.owner.transform.position.y = Math.random() * 400;
  },
   update: function(c){

   }})


C("wander", {speed:2},
  {update: function(c){
      c.owner.transform.rotation += Math.random() * 0.01;
      c.owner.transform.position.x += Math.random() * c.speed - 0.5 * c.speed;
      c.owner.transform.position.y += Math.random() * c.speed - 0.5 * c.speed; }});


makeActor = function(name){
    return E(name,
            C.new.actor(),
            C.new.movie({
              frameName: "colonist.walk",
              animationSpeed: .15,
              frameCount: 12
            }),
            C.new.wander() );
}

map = E("map",
  C.new.grid(),
  C.new.background());


root = E("game",
  makeActor('ddmills'),
  makeActor('jplur'),
  C.new.pixi(),
  C.new.loop(),
  E('people'));

var holder = root.find('people');
for (var i = 0; i < 1000; i++) {
  holder.add(makeActor('bob'+i));
}

root.add(map);



PIXI.loader
.add('assets/sprites/objects/alphasquare.png')
.add('assets/sprites/colonist/colonist.json')
.load(function(){
  E.init(root);
  //window.inspect(root);
});

window.onload = function(e){};

</script>

	</body>
</html>

