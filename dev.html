<html>
<head>
    <script type='text/javascript' id='lt_ws' src='http://localhost:49181/socket.io/lighttable/ws.js'></script>
    <script type="text/javascript" src='js/lib/pixi.min.js'></script>
    <script type="text/javascript" src="js/required.js"></script>
    <script type="text/javascript" src="js/cljs/dev.js"></script>
    <script type="text/javascript" src="js/components/standard.js"></script>
    <script type="text/javascript" src="js/components/pixi-renderer.js"></script>
    <script type="text/javascript" src="js/components/joegrid.js"></script>

    <link href="css/ce.css" type="text/css" rel="stylesheet">

</head>
	<body>
        <script type="text/javascript" src="js/Constants.js"></script>
<script>

    E.mandate(C.new.transform);


    C("actor",
      {name: ""},
      {init: function(c){
          c.name = c.owner.name || "none";
          c.owner.transform.position.x = Math.random() * 600;
          c.owner.transform.position.y = Math.random() * 400;
      },
       update: function(c){

       }})


    C("wander", {speed:2},
      {update: function(c){

          c.owner.transform.position.x += Math.random() * c.speed - 0.5 * c.speed;
          c.owner.transform.position.y += Math.random() * c.speed - 0.5 * c.speed; }});


    makeActor = function(name){
        return E(name,
                C.new.actor(),
                C.new.sprite({image: "assets/sprites/objects/alphasquare.png"}),
                C.new.wander() );
    }

    map = E("map",
            C.new.grid(),
            C.new.background())


    root =
        E("game",
          C.new.pixi(),
          C.new.loop());

    root.add(map);



    window.onload = function(e){
        console.log("window.onload");
        E.init(root);
        //window.inspect(root);
    };



</script>

	</body>
</html>

